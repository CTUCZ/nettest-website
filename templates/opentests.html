{% extends basetemplate %}
{% set title = Lang.opentests %}
{% set containerclass = "full-width" %}

{% block headerscriptingExtended %}
<link rel="stylesheet" type="text/css" href="../lib/olv3/ol.css" media="screen" />
<script src="../lib/olv3/ol.js" type="text/javascript"></script>
<script type="text/javascript" src="../js/jquery.flot.min.js"></script>
<script src="../lib/handlebars.min.js" type="text/javascript"></script>
<script src="../lib/moment.min.js" type="text/javascript"></script>
<script src="../lib/date-de-AT.js" type="text/javascript"></script>
<script type="text/javascript" src="../js/Opentests.js"></script>

<link rel="stylesheet" type="text/css" href="../lib/selectize/selectize.bootstrap3.css" media="screen" />
<script type="text/javascript" src="../lib/selectize/selectize.min.js"></script>

<style>
    table tr td a {
        display:block;
        height:100%;
        width:100%;
    }

    #advanced-search table td {
        vertical-align: middle;
    }
    #advanced-search table tr td:first-child {
        text-align: right;
        max-width: 150px;
    }

    #advanced-search table th {
        text-align: left;
        cursor: pointer;
        font-weight: normal;
    }

    input.form-control {
        background-color: white;
    }

    #advanced-search input[type="number"]{
        /*width: 110px;*/
    }
    
    #expert_filters {
        display: none;
    }

    /* #advanced-search tbody {
        display:none;
    } */

    .initial-placeholder {
        min-height: 15000px;
    }
    
    body {
    	height: inherit !important;
    }

    #advanced-search table.dont-stack {
        margin: 0em;
    }

    
    
    
    /* Histogram */
    .tabs-header ul {
        list-style: none;
        padding: 0px;
        margin: 0px;
    }

    .tabs-header ul li {
        float: left;
        border: solid;
        padding: 0px;
        border-width: 1px 1px 0px 1px;
        border-color: #3CC828;
        margin: 0px 5px 0px 0px;
        background-image: none;
    }


    .tabs-header ul li a {
        display: block;
        padding: 3px;
        padding-left: 8px;
        padding-right: 8px;
        text-decoration: none;
        background-color: #EEF2F4;
    }

    .tabs-header ul li.tab-selected a {
        position: relative;
        top: 1px;
        background-color: white;
    }

    .tabs-content {
        clear: both;
        border: 1px solid #3CC828;
        border-width: 1px 0px 0px 0px;
        margin-bottom: 10px;
    }
    
    /* accordion */
    .task-telekom .first-level [data-control]{
        background-color: white;
        color: #59b200;
    }
    
    [data-accordion].open > [data-control] {
        background-color: white !important;
    }

</style>
{% endblock %}

{% block content %}
<div class="testdata"> <!-- will be cloned for user-openuuids -->
    <h2 id="h2">{{ Lang.test_results }}</h2>
    <div id="spinner"></div>
    
    
    <div class="accordion-list" data-accordion-group="">



        <section class="first-level level-count-one" data-accordion="">

            <div data-control="">
                <span>{{ Lang.advanced_search }} <span id="advanced-search-filter-count"></span></span>
            </div>
            <div style="max-height: 0px; overflow: hidden;" data-content="">
                <div class="accordion-item" id="advanced-search">
                    <form onsubmit="setFilters();return false;" method="get" class="form-horizontal">
                        <fieldset>
                            <div class="form-group">
                                <label for="download_kbit" class="col-sm-4 control-label">{{ Lang.download }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                        <label for="download_kbit" class="form-control-static control-label">{{ Lang.from }}</label>
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" step="any" id="download_kbit" onkeyup="copyValueToUpper(this);" /> 
                                            <div class="input-group-addon">{{ Lang.mbps }}</div>
                                        </div>
                                        <label for="download_kbit_upper" class="form-control-static control-label">{{ Lang.up_to }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" step="any" id="download_kbit_upper" />
                                            <div class="input-group-addon">{{ Lang.mbps }}</div>
                                        </div> 
                                    </div>
                                </div>
                            </div>   
                            <div class="form-group">
                                <label for="upload_kbit" class="col-sm-4 control-label">{{ Lang.upload }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                        <label for="upload_kbit" class="form-control-static control-label">{{ Lang.from }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" step="any" id="upload_kbit" onkeyup="copyValueToUpper(this);" /> 
                                            <div class="input-group-addon">{{ Lang.mbps }}</div>
                                        </div>
                                        <label for="upload_kbit_upper" class="form-control-static control-label">{{ Lang.up_to }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" step="any" id="upload_kbit_upper" />
                                            <div class="input-group-addon">{{ Lang.mbps }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="ping_ms">{{ Lang.ping }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                        <label for="ping_ms" class="form-control-static control-label">{{ Lang.from }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" id="ping_ms" onkeyup="copyValueToUpper(this);" /> 
                                            <div class="input-group-addon">{{ Lang.ms }}</div>
                                        </div>
                                        <label for="ping_ms_upper" class="form-control-static control-label">{{ Lang.up_to }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" id="ping_ms_upper" />
                                            <div class="input-group-addon">{{ Lang.ms }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="signal_strength">{{ Lang.signal_strength }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                            <label class="form-control-static control-label" for="signal_strength">{{ Lang.from }}</label> 
                                            <div class="input-group col-md-4 col-sm-5">
                                                <input class="form-control" type="number" id="signal_strength" onkeyup="copyValueToUpper(this);" /> 
                                                <div class="input-group-addon">{{ Lang.dBm }}</div>
                                            </div>
                                            <label class="form-control-static control-label" for="signal_strength_upper">{{ Lang.up_to }}</label> 
                                            <div class="input-group col-md-4 col-sm-5">
                                                <input class="form-control" type="number" id="signal_strength_upper" />
                                                <div class="input-group-addon">{{ Lang.dBm }}</div>
                                            </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="loc_accuracy" class="col-sm-4 control-label">{{ Lang.location_accuracy }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                        <label for="loc_accuracy" class="form-control-static control-label">{{ Lang.from }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" id="loc_accuracy" onkeyup="copyValueToUpper(this);" /> 
                                            <div class="input-group-addon">m</div>
                                        </div>
                                        <label for="loc_accuracy_upper" class="form-control-static control-label">{{ Lang.up_to }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" id="loc_accuracy_upper" />
                                            <div class="input-group-addon">m</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="gkz" class="col-sm-4 control-label">{{ Lang.opentests_content.gkz }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                        <label for="gkz" class="form-control-static control-label">{{ Lang.from }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                            <input class="form-control" type="number" id="gkz" onkeyup="copyValueToUpper(this);" /> 
                                        </div>
                                         <label for="gkz_upper" class="form-control-static control-label">{{ Lang.up_to }}</label> 
                                        <div class="input-group col-md-4 col-sm-5">
                                           <input class="form-control" type="number" id="gkz_upper" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="cat_technology" class="col-sm-4 control-label">{{ Lang.connection_technology }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <select class="form-control" id="cat_technology" placeholder="- {{ Lang.all }} -">
                                        <option value="">- {{ Lang.all }} -</option>
                                    </select>
                                </div>
                            </div>
                            


                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="model">{{ Lang.device }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <input class="form-control" type="text" id="model" />
                                </div>
                            </div>
                           
                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="provider_name">{{ Lang.operator }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <input class="form-control" type="text" id="provider_name" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="public_ip_as_name">{{ Lang.opentests_content.public_ip_as_name }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <input class="form-control" type="text" id="public_ip_as_name" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="mobile_provider_name">{{ Lang.opentests_content.mobile_provider_name }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <input class="form-control" type="text" id="mobile_provider_name" />
                                </div>
                            </div>
                            <div class="form-group" id="time_interval">
                                <label class="col-sm-4 control-label" for="time_interval_count">{{ Lang.timespan }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                        <select id="time_interval_count" class="form-control col-sm-3" style="width: 90px"  placeholder="- {{ Lang.all }} -">
                                            <option value="">- {{ Lang.all }} -</option>
                                        </select>
                                        <select id="time_interval_type" class="form-control col-sm-5" style="width: 160px"  placeholder="- {{ Lang.all }} -">
                                            <option value="">- {{ Lang.all }} -</option>
                                            <option value="days">{{ Lang.days }}</option>
                                            <option value="months">{{ Lang.months }}</option>
                                            <option value="years">{{ Lang.years }}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label" for="time">{{ Lang.timespan }} {{ Lang.end }}</label>
                                <div class="col-md-7 col-sm-8">
                                    <div class="form-inline">
                                        <input class="form-control" type="date" class="form-control" id="dateB" placeholder="2015-01-01"/>
                                        <input class="form-control" type="time" class="form-control" id="timeB" placeholder="00:00:01" step="1"/>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <a href="#" class="col-sm-offset-4 col-sm-8" onclick="$('#expert_filters').show();$(window).trigger('resize');$(this).parent().hide();return false;">Weitere Filter <span id="expert_filters_count"></span></a>
                            </div>
                            <div id="expert_filters">
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="time">{{ Lang.timespan }} {{ Lang.begin }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <div class="form-inline">
                                            <input class="form-control" type="date" class="form-control" id="dateA" placeholder="2015-01-01"/>
                                            <input class="form-control" type="time" class="form-control" id="timeA" placeholder="00:00:01" step="1"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="zip_code" class="col-sm-4 control-label">{{ Lang.zip_code }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <div class="form-inline">
                                            <label for="zip_code" class="form-control-static control-label">{{ Lang.from }}</label>
                                            <div class="input-group col-md-4 col-sm-5">
                                                <input class="form-control" type="number" id="zip_code" onkeyup="copyValueToUpper(this);" /> 
                                            </div>
                                            <label for="zip_code_upper" class="form-control-static control-label">{{ Lang.up_to }}</label> 
                                            <div class="input-group col-md-4 col-sm-5">
                                                <input class="form-control" type="number" id="zip_code_upper" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="platform" class="col-sm-4 control-label">{{ Lang.platform }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <select class="form-control" id="platform">
                                            <option value="">- {{ Lang.all }} -</option>
                                            <option value="Android">Android</option>
                                            <option value="Applet">Applet</option>
                                            <option value="iOS">iOS</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="client_version">{{ Lang.software_version }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <select class="form-control" id="client_version">
                                            <option value="">- {{ Lang.all }} -</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="network_name">{{ Lang.opentests_content.network_name }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <input class="form-control" type="text" id="network_name" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="network_country">{{ Lang.opentests_content.network_country }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <select class="form-control" id="network_country">
                                            <option value="">- {{ Lang.all }} -</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="country_geoip">{{ Lang.opentests_content.country_geoip }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <select class="form-control" id="country_geoip">
                                            <option value="">- {{ Lang.all }} -</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="sim_country">{{ Lang.opentests_content.sim_home_country }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <select class="form-control" id="sim_country">
                                            <option value="">- {{ Lang.all }} -</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="sim_mcc_mnc">{{ Lang.opentests_content.sim_mcc_mnc }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <input class="form-control" type="text" id="sim_mcc_mnc" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="asn">{{ Lang.asn }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <input class="form-control" type="text" id="asn" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4 control-label" for="model">{{ Lang.open_uuid }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <input class="form-control" type="text" id="open_uuid" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="pinned" class="col-sm-4 control-label">{{ Lang.pinned }}</label>
                                    <div class="col-md-7 col-sm-8">
                                        <select class="form-control" id="pinned">
                                            <option value="">- {{ Lang.all }} -</option>
                                            <option value="select">- {{ Lang.all }} -</option>
                                            <option value="true">{{ Lang.opentests_content.pinned_true }}</option>
                                            <option value="false">{{ Lang.opentests_content.pinned_false }}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>


                            <div class="form-group ">
                                <div class="col-md-7 col-sm-8 col-sm-offset-4">
                                    <button type="submit" class="btn btn-primary">{{ Lang.apply_filters }}</button>
                                    <button type="reset" class="btn btn-default">{{ Lang.reset }}</button>
                                </div>
                            </div>


                        </fieldset>
                    </form>

                </div> <!-- end advanced search -->
            </div>
        </section>
    </div>
    
    
    <div class="accordion-list" data-accordion-group="" id="map-accordion">
        <section class="first-level level-count-one" data-accordion="">

            <div data-control="">
                <span>{{ Lang.map }}</span>
            </div>
            <div style="max-height: 0px; overflow: hidden;" data-content="">
                <div class="accordion-item">
                    <div style="height:800px" id="opentests-map-container">

                    </div>
                    <div id="markerTemplate" style="display:none">
                        <div class="olPopup">

                            <h1>{{Lang.measurements}}</h1>
                            <div class="infoWrap">
                                <hr/>
                                {% raw %}
                                {{#each data}}

                                <h2 class="
                                    {{#if highlight}}
                                      highlight
                                    {{/if}}
                                    ">{{ formatDate time }}
                                    <input type='button' style='float:right;' class='submit'
                                           onClick="window.open('/{% endraw %}{{ Lang.lang }}{% raw %}/Opentest?{{open_test_uuid}}')" value='{% endraw %}{{ Lang.moreInfo }}{% raw %}'/>
                                </h2>

                                <h3>{% endraw %}{{ Lang.measurement }}{% raw %}</h3>

                                {{#each measurement}}
                                <div class="row">
                                    <div class="rowlabel">{{ title }}</div>
                                    <a href='https://www.rtr.at/{% endraw %}{{ Lang.lang }}{% raw %}/rtr/netztestfaq_testergebnis#c25826'
                                       target='_blank'>
                                        <div class='rowclassification classification{{ classification }}'>{{classification}}</div>
                                    </a>

                                    <div class="rowitem">{{ value }}</div>
                                </div>
                                {{/each}}
                                <h3>{% endraw %}{{ Lang.net }}{% raw %}</h3>
                                {{#each net}}
                                <div class="row">
                                    <div class="rowlabel">{{ title }}</div>
                                    <div class="rowitem">{{ value }}</div>
                                </div>
                                {{/each}}
                                <hr/>
                                {{/each}}
                                {% endraw %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <div class="accordion-list" data-accordion-group="" id="histograms-accordion">
        <section class="first-level level-count-one" data-accordion="">

            <div data-control="">
                <span>{{ Lang.histogram }}</span>
            </div>
            <div style="max-height: 0px; overflow: hidden;" data-content="">
                <div class="accordion-item">
                    <div id="histograms">
                        <div class="tabs-header">
                            <ul class="tab-headings">
                                <li class="tab-selected"><a href="#histogram-download">Download (Mbit/s)</a></li>
                                <li><a href="#histogram-upload">Upload (Mbit/s)</a></li>
                                <li><a href="#histogram-ping">Ping (ms)</a></li>
                            </ul>
                        </div>
                        <div class="tabs-content" style="height:195px">
                            <div class="tab-content tab-selected" id="histogram-download">
                                <div class="histogram-download_kbit-graph"></div> 
                            </div>
                            <div class="tab-content not-loaded" id="histogram-upload">
                                <div class="histogram-upload_kbit-graph"></div> 
                            </div>
                            <div class="tab-content not-loaded" id="histogram-ping">
                                <div class="histogram-ping_ms-graph"></div> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

        
    <div class="testdata-content initial-placeholder">
        <table id="verlauf" class="dont-stack">
            <thead>
            <tr>
                <th><a href="#" onclick="sortResultsBy('time');return false;">{{ Lang.time }}</a></th>
                <th class="test-platform"></th>
                <th width="1%" class="right"><a href="#" onclick="sortResultsBy('download_kbit');return false;">{{ Lang.download }} ({{ Lang.mbps }})</a></th>
                <th width="1%" class="right"><a href="#" onclick="sortResultsBy('upload_kbit');return false;">{{ Lang.upload }} ({{ Lang.mbps }})</a></th>
                <th width="1%" class="right"><a href="#" onclick="sortResultsBy('ping_ms');return false;">{{ Lang.ping }} ({{ Lang.ms }})</a></th>
                <th width="1%" class="right test-network-signal"><a href="#" onclick="sortResultsBy('signal_strength');return false;">{{ Lang.signal_strength }}</a></th>
            </tr>
            </thead>
            <tbody>

            </tbody>


        </table>


    </div>







</div>

<a id="next-result-page" href="#">{{ Lang.opentests_content.next_page }}</a> (<span id="number-of-results"></span>  {{ Lang.opentests_content.results }})
{% endblock %}