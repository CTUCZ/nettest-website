{% extends basetemplate %}
{% set title = Lang.opentests %}
{% set containerclass = "full-width" %}

{% block headerscriptingExtended %}
<link rel="stylesheet" type="text/css" href="../lib/olv3/ol.css" media="screen" />
<script src="../lib/olv3/ol.js" type="text/javascript"></script>
<script type="text/javascript" src="../js/jquery.flot.min.js"></script>
<script src="../lib/handlebars.min.js" type="text/javascript"></script>
<script src="../lib/moment.min.js" type="text/javascript"></script>
<script src="../lib/date-de-AT.js" type="text/javascript"></script>
<script type="text/javascript" src="../js/Opentests.js"></script>

<style>
    table tr td a {
        display:block;
        height:100%;
        width:100%;
    }

    #advanced-search table td {
        vertical-align: middle;
    }
    #advanced-search table tr td:first-child {
        text-align: right;
        max-width: 150px;
    }

    #advanced-search table th {
        text-align: left;
        cursor: pointer;
        font-weight: normal;
    }

    #advanced-search input[type="number"]{
        width: 50px;
    }

    /* #advanced-search tbody {
        display:none;
    } */

    .initial-placeholder {
        min-height: 15000px;
    }
    
    body {
    	height: inherit !important;
    }

    #advanced-search table.dont-stack {
        margin: 0em;
    }
    
    
    
    
    /* Histogram */
    .tabs-header ul {
        list-style: none;
        padding: 0px;
        margin: 0px;
    }

    .tabs-header ul li {
        float: left;
        border: solid;
        padding: 0px;
        border-width: 1px 1px 0px 1px;
        border-color: #3CC828;
        margin: 0px 5px 0px 0px;
        background-image: none;
    }


    .tabs-header ul li a {
        display: block;
        padding: 3px;
        padding-left: 8px;
        padding-right: 8px;
        text-decoration: none;
        background-color: #EEF2F4;
    }

    .tabs-header ul li.tab-selected a {
        position: relative;
        top: 1px;
        background-color: white;
    }

    .tabs-content {
        clear: both;
        border: 1px solid #3CC828;
        border-width: 1px 0px 0px 0px;
        margin-bottom: 10px;
    }
    
    /* accordion */
    .task-telekom .first-level [data-control]{
        background-color: white;
        color: #59b200;
    }
    
    [data-accordion].open > [data-control] {
        background-color: white !important;
    }

</style>
{% endblock %}

{% block content %}
<div class="testdata"> <!-- will be cloned for user-openuuids -->
    <h2 id="h2">{{ Lang.test_results }}</h2>
    <div id="spinner"></div>
    
    
    <div class="accordion-list" data-accordion-group="">



        <section class="first-level level-count-one" data-accordion="">

            <div data-control="">
                <span>{{ Lang.advanced_search }} <span id="advanced-search-filter-count"></span></span>
            </div>
            <div style="max-height: 0px; overflow: hidden;" data-content="">
                <div class="accordion-item" id="advanced-search">
                    <form onsubmit="setFilters();return false;" method="get">
                        <fieldset>
                            <table class="dont-stack">
                                <tbody>
                                    <tr>
                                        <td>
                                            <label for="download_kbit">{{ Lang.download }}</label>
                                        </td>
                                        <td>
                                            {{ Lang.from }} <input type="number" id="download_kbit" onkeyup="copyValueToUpper(this);" /> {{ Lang.up_to }} <input type="number" id="download_kbit_upper" /> {{ Lang.mbps }}
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="upload_kbit">{{ Lang.upload }}</label>
                                        </td>
                                        <td>
                                            {{ Lang.from }} <input type="number" id="upload_kbit" onkeyup="copyValueToUpper(this);" /> {{ Lang.up_to }} <input type="number" id="upload_kbit_upper" /> {{ Lang.mbps }}
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="ping_ms">{{ Lang.ping }}</label>
                                        </td>
                                        <td>
                                            {{ Lang.from }} <input type="number" id="ping_ms" onkeyup="copyValueToUpper(this);" /> {{ Lang.up_to }} <input type="number" id="ping_ms_upper" /> {{ Lang.ms }}
                                        </td>

                                    </tr>

                                    <tr>
                                        <td>
                                            <label for="signal_strength">{{ Lang.signal_strength }}</label>
                                        </td>
                                        <td>
                                            {{ Lang.from }} <input type="number" id="signal_strength" onkeyup="copyValueToUpper(this);" /> {{ Lang.up_to }} <input type="number" id="signal_strength_upper" /> {{ Lang.dBm }}
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="loc_accuracy">{{ Lang.location_accuracy }}</label>
                                        </td>
                                        <td>
                                            {{ Lang.from }} <input type="number" id="loc_accuracy" onkeyup="copyValueToUpper(this);" /> {{ Lang.up_to }} <input type="number" id="loc_accuracy_upper" /> m
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="zip_code">{{ Lang.zip_code }}</label>
                                        </td>
                                        <td>
                                            {{ Lang.from }} <input type="number" id="zip_code" onkeyup="copyValueToUpper(this);" /> {{ Lang.up_to }} <input type="number" id="zip_code_upper" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="gkz">{{ Lang.opentests_content.gkz }}</label>
                                        </td>
                                        <td>
                                            {{ Lang.from }} <input type="number" id="gkz" onkeyup="copyValueToUpper(this);" /> {{ Lang.up_to }} <input type="number" id="gkz_upper" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="cat_technology">{{ Lang.connection_technology }}</label>
                                        </td>
                                        <td>

                                            <select id="cat_technology">
                                                <option value="select">- {{ Lang.all }} -</option>
                                            </select>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="platform">{{ Lang.platform }}</label>
                                        </td>
                                        <td>
                                            <select id="platform">
                                                <option value="select">- {{ Lang.all }} -</option>
                                                <option value="Android">Android</option>
                                                <option value="Applet">Applet</option>
                                                <option value="iOS">iOS</option>
                                            </select>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="client_version">{{ Lang.software_version }}</label>
                                        </td>
                                        <td>
                                            <select id="client_version">
                                                <option value="select">- {{ Lang.all }} -</option>
                                            </select>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="model">{{ Lang.device }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="model" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="model">{{ Lang.open_uuid }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="open_uuid" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="network_name">{{ Lang.opentests_content.network_name }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="network_name" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="network_country">{{ Lang.opentests_content.network_country }}</label>
                                        </td>
                                        <td>
                                            <select id="network_country">
                                                <option value="select">- {{ Lang.all }} -</option>
                                            </select>
                                        </td>

                                    </tr>


                                    <tr>
                                        <td>
                                            <label for="provider_name">{{ Lang.operator }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="provider_name" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="public_ip_as_name">{{ Lang.opentests_content.public_ip_as_name }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="public_ip_as_name" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="asn">{{ Lang.asn }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="asn" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="mobile_provider_name">{{ Lang.opentests_content.mobile_provider_name }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="mobile_provider_name" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="sim_country">{{ Lang.opentests_content.sim_home_country }}</label>
                                        </td>
                                        <td>
                                            <select id="sim_country">
                                                <option value="select">- {{ Lang.all }} -</option>
                                            </select>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="sim_mcc_mnc">{{ Lang.opentests_content.sim_mcc_mnc }}</label>
                                        </td>
                                        <td>
                                            <input type="text" id="sim_mcc_mnc" />
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="country_geoip">{{ Lang.opentests_content.country_geoip }}</label>
                                        </td>
                                        <td>
                                            <select id="country_geoip">
                                                <option value="select">- {{ Lang.all }} -</option>
                                            </select>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td>
                                            <label for="time_year">{{ Lang.time }}</label>
                                        </td>
                                        <td>
                                            <select id="time_year">
                                                <option value="select">----</option>
                                            </select>
                                            <select id="time_month" onchange="setDaysFor($(this).val());">
                                                <option value="select">--</option>
                                                <option value="01">1</option>
                                                <option value="02">2</option>
                                                <option value="03">3</option>
                                                <option value="04">4</option>
                                                <option value="05">5</option>
                                                <option value="06">6</option>
                                                <option value="07">7</option>
                                                <option value="08">8</option>
                                                <option value="09">9</option>
                                                <option value="10">10</option>
                                                <option value="11">11</option>
                                                <option value="12">12</option>
                                            </select>
                                            <select id="time_day">
                                                <option value="select">--</option>
                                            </select>
                                        </td>

                                    </tr>

                                    <tr>
                                        <td></td>
                                        <td>
                                            <button type="submit">{{ Lang.apply_filters }}</button>&nbsp;&nbsp;&nbsp;&nbsp;
                                            <button type="reset">{{ Lang.reset }}</button>
                                        </td>
                                    </tr>
                                    <!--<tr>
                                        <td colspan="2" style="text-align: left">
                                            Hinweis: Mit "*" können beliebige Zeichen gefunden werden.
                                        </td>
                                    </tr>-->
                                </tbody>
                            </table>
                        </fieldset>
                    </form>

                </div> <!-- end advanced search -->
            </div>
        </section>
    </div>
    
    
    <div class="accordion-list" data-accordion-group="" id="map-accordion">
        <section class="first-level level-count-one" data-accordion="">

            <div data-control="">
                <span>{{ Lang.map }}</span>
            </div>
            <div style="max-height: 0px; overflow: hidden;" data-content="">
                <div class="accordion-item">
                    <div style="height:800px" id="opentests-map-container">

                    </div>
                    <div id="markerTemplate" style="display:none">
                        <div class="olPopup">

                            <h1>{{Lang.measurements}}</h1>
                            <div class="infoWrap">
                                <hr/>
                                {% raw %}
                                {{#each data}}

                                <h2 class="
                                    {{#if highlight}}
                                      highlight
                                    {{/if}}
                                    ">{{ formatDate time }}
                                    <input type='button' style='float:right;' class='submit'
                                           onClick="window.open('/{% endraw %}{{ Lang.lang }}{% raw %}/Opentest?{{open_test_uuid}}')" value='{% endraw %}{{ Lang.moreInfo }}{% raw %}'/>
                                </h2>

                                <h3>{% endraw %}{{ Lang.measurement }}{% raw %}</h3>

                                {{#each measurement}}
                                <div class="row">
                                    <div class="rowlabel">{{ title }}</div>
                                    <a href='https://www.rtr.at/{% endraw %}{{ Lang.lang }}{% raw %}/rtr/netztestfaq_testergebnis#c25826'
                                       target='_blank'>
                                        <div class='rowclassification classification{{ classification }}'>{{classification}}</div>
                                    </a>

                                    <div class="rowitem">{{ value }}</div>
                                </div>
                                {{/each}}
                                <h3>{% endraw %}{{ Lang.net }}{% raw %}</h3>
                                {{#each net}}
                                <div class="row">
                                    <div class="rowlabel">{{ title }}</div>
                                    <div class="rowitem">{{ value }}</div>
                                </div>
                                {{/each}}
                                <hr/>
                                {{/each}}
                                {% endraw %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    
    <div class="accordion-list" data-accordion-group="" id="histograms-accordion">
        <section class="first-level level-count-one" data-accordion="">

            <div data-control="">
                <span>{{ Lang.histogram }}</span>
            </div>
            <div style="max-height: 0px; overflow: hidden;" data-content="">
                <div class="accordion-item">
                    <div id="histograms">
                        <div class="tabs-header">
                            <ul class="tab-headings">
                                <li class="tab-selected"><a href="#histogram-download">Download (Mbit/s)</a></li>
                                <li><a href="#histogram-upload">Upload (Mbit/s)</a></li>
                                <li><a href="#histogram-ping">Ping (ms)</a></li>
                            </ul>
                        </div>
                        <div class="tabs-content" style="height:195px">
                            <div class="tab-content tab-selected" id="histogram-download">
                                <div class="histogram-download_kbit-graph"></div> 
                            </div>
                            <div class="tab-content not-loaded" id="histogram-upload">
                                <div class="histogram-upload_kbit-graph"></div> 
                            </div>
                            <div class="tab-content not-loaded" id="histogram-ping">
                                <div class="histogram-ping_ms-graph"></div> 
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

        
    <div class="testdata-content initial-placeholder">
        <table id="verlauf" class="dont-stack">
            <thead>
            <tr>
                <th><a href="#" onclick="sortResultsBy('time');return false;">{{ Lang.time }}</a></th>
                <th class="test-platform"></th>
                <th width="1%" class="right"><a href="#" onclick="sortResultsBy('download_kbit');return false;">{{ Lang.download }} ({{ Lang.mbps }})</a></th>
                <th width="1%" class="right"><a href="#" onclick="sortResultsBy('upload_kbit');return false;">{{ Lang.upload }} ({{ Lang.mbps }})</a></th>
                <th width="1%" class="right"><a href="#" onclick="sortResultsBy('ping_ms');return false;">{{ Lang.ping }} ({{ Lang.ms }})</a></th>
                <th width="1%" class="right test-network-signal"><a href="#" onclick="sortResultsBy('signal_strength');return false;">{{ Lang.signal_strength }}</a></th>
            </tr>
            </thead>
            <tbody>

            </tbody>


        </table>


    </div>







</div>

<a id="next-result-page" href="#">{{ Lang.opentests_content.next_page }}</a> (<span id="number-of-results"></span>  {{ Lang.opentests_content.results }})
{% endblock %}