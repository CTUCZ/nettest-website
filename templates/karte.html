{% extends basetemplate %}
{% set title = Lang.map %}
{% set containerclass = "full-width" %}

{% block headerscriptingExtended %}
<script src="https://maps.google.com/maps/api/js?v=3&amp;key=AIzaSyDzGSWomXtxO_5tTYEyQgyWV0eS0TbcaUg"></script>

<script src="../{{ fingerprint["lib/olv3/ol.js"] }}" type="text/javascript"></script>
<script src="../{{ fingerprint["lib/handlebars.min.js"] }}" type="text/javascript"></script>
<script src="../{{ fingerprint["lib/moment.min.js"] }}" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="../{{ fingerprint["lib/olv3/ol.css"] }}" media="screen" />

<script src="../{{ fingerprint["lib/date-de-AT.js"] }}" type="text/javascript"></script>

<script src="../{{ fingerprint["js/Karte.js"] }}" type="text/javascript"></script>

<style>
    /*.olPopup {
        position: absolute;
        background-color: white;
        -webkit-filter: drop-shadow(0 1px 4px rgba(0,0,0,0.2));
        filter: drop-shadow(0 1px 4px rgba(0,0,0,0.2));
        padding: 15px;
        border: 1px solid #cccccc;
    }
    .olPopup:after, .olPopup:before {
        top: 100%;
        border: solid transparent;
        content: " ";
        height: 0;
        width: 0;
        position: absolute;
        pointer-events: none;
    }
    .olPopup:after {
        border-top-color: white;
        border-width: 10px;
        
    }
    .olPopup:before {
        border-top-color: #cccccc;
        
    }
    .olPopup-closer {
        text-decoration: none;
        position: absolute;
        top: 2px;
        right: 8px;
    }
    .olPopup-closer:after {
        content: "âœ–";
    }*/

    #control {
        margin: 0px;
        margin-top: 1em;
    }

    #control fieldset {
        padding: 0px;
    }

    
    .infoWrap {
        width: 244px !important;
    }


    .layer-switcher {
        position: absolute;
        top: 4.5em;
        left: 0.5em;
        text-align: left;
    }

    .layer-switcher .panel {
        padding-left: 40px;
        padding-right: 10px;
        border: 1px solid #cccccc;
        background-color: white;
        margin: 0;
        display: none;
    }

    .layer-switcher.shown .panel {
        display: block;
    }

    .layer-switcher button {
        float: left;
        width: 38px;
        height: 38px;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACE1BMVEX///8A//8AgICA//8AVVVAQID///8rVVVJtttgv98nTmJ2xNgkW1ttyNsmWWZmzNZYxM4gWGgeU2JmzNNr0N1Rwc0eU2VXxdEhV2JqytQeVmMhVmNoydUfVGUgVGQfVGQfVmVqy9hqy9dWw9AfVWRpydVry9YhVmMgVGNUw9BrytchVWRexdGw294gVWQgVmUhVWPd4N6HoaZsy9cfVmQgVGRrytZsy9cgVWQgVWMgVWRsy9YfVWNsy9YgVWVty9YgVWVry9UgVWRsy9Zsy9UfVWRsy9YgVWVty9YgVWRty9Vsy9aM09sgVWRTws/AzM0gVWRtzNYgVWRuy9Zsy9cgVWRGcHxty9bb5ORbxdEgVWRty9bn6OZTws9mydRfxtLX3Nva5eRix9NFcXxOd4JPeINQeIMiVmVUws9Vws9Vw9BXw9BYxNBaxNBbxNBcxdJexdElWWgmWmhjyNRlx9IqXGtoipNpytVqytVryNNrytZsjZUuX210k5t1y9R2zNR3y9V4lp57zth9zdaAnKOGoaeK0NiNpquV09mesrag1tuitbmj1tuj19uktrqr2d2svcCu2d2xwMO63N+7x8nA3uDC3uDFz9DK4eHL4eLN4eIyYnDX5OM5Z3Tb397e4uDf4uHf5uXi5ePi5+Xj5+Xk5+Xm5+Xm6OY6aHXQ19fT4+NfhI1Ww89gx9Nhx9Nsy9ZWw9Dpj2abAAAAWnRSTlMAAQICAwQEBgcIDQ0ODhQZGiAiIyYpKywvNTs+QklPUlNUWWJjaGt0dnd+hIWFh4mNjZCSm6CpsbW2t7nDzNDT1dje5efr7PHy9PT29/j4+Pn5+vr8/f39/f6DPtKwAAABTklEQVR4Xr3QVWPbMBSAUTVFZmZmhhSXMjNvkhwqMzMzMzPDeD+xASvObKePPa+ffHVl8PlsnE0+qPpBuQjVJjno6pZpSKXYl7/bZyFaQxhf98hHDKEppwdWIW1frFnrxSOWHFfWesSEWC6R/P4zOFrix3TzDFLlXRTR8c0fEEJ1/itpo7SVO9Jdr1DVxZ0USyjZsEY5vZfiiAC0UoTGOrm9PZLuRl8X+Dq1HQtoFbJZbv61i+Poblh/97TC7n0neCcK0ETNUrz1/xPHf+DNAW9Ac6t8O8WH3Vp98f5lCaYKAOFZMLyHL4Y0fe319idMNgMMp+zWVSybUed/+/h7I4wRAG1W6XDy4XmjR9HnzvDRZXUAYDFOhC1S/Hh+fIXxen+eO+AKqbs+wAo30zDTDvDxKoJN88sjUzDFAvBzEUGFsnADoIvAJzoh2BZ8sner+Ke/vwECuQAAAABJRU5ErkJggg==') /*logo.png*/;
        background-repeat: no-repeat;
        background-position: 2px;
        background-color: white;
        border: none;
    }

    .layer-switcher button:focus, .layer-switcher button:hover {
        background-color: white;
    }

    .layer-switcher ul {
        padding-left: 1em;
        list-style: none;
    }

    .layer-switcher li.group {
        padding-top: 5px;
    }

    .layer-switcher li.group > label {
        font-weight: bold;
    }

    .layer-switcher input {
        margin: 4px;
    }

</style>
{% endblock %}

{% block content %}
{{ Lang.map_content.teaser }}
<div id="nettestmap">
<div id="spinner"></div>
<form id="control" class="form-inline">

	<fieldset>
    <div id='auswahl_selector' class='search_form'>

        <div class="form-group">
            <label for="check_automatic" class="radio-inline">
                <input type="radio" name="check_layer" id="check_automatic" value="automatic" checked="checked"/>
                {{ Lang.automatic }}
            </label>

            <label for="check_heatmap" class="radio-inline">
                <input type="radio" name="check_layer" id="check_heatmap" value="heatmap"/>
                {{ Lang.heatmap }}
            </label>

            <label for="check_points" class="radio-inline">
                <input type="radio" name="check_layer" id="check_points" value="points"/>
                {{ Lang.points }}
            </label>

            <label for="check_shapes" class="radio-inline">
            <input type="radio" name="check_layer" id="check_shapes" value="shapes"/>
            {{ Lang.communities }}
            </label>

        </div>
    </div>
    
    <div style="clear: both"></div>

    <div id='filter_selector' class='search_form'>

    </div>
    
    </fieldset>
    
</form>
<div class="clear"></div>
    <div id="speedtestmapcontainer">
        <input id="lightboxbutton" type="button" value="{{ Lang.map_content.large_view }}">
        <div id="speedtestmap" class="olMap">
        </div>
        <div id="markerTemplate" style="display:none">
            <div class="olPopup">

            <h1>{{Lang.measurements}}</h1>
            <div class="infoWrap">
                <hr/>
                {% raw %}
                {{#each data}}

                    <h2 class="
                        {{#if highlight}}
                    highlight
                        {{/if}}
                        ">{{ formatDate time }}
                        <input type='button' style='float:right;' class='submit'
                               onClick="window.open('/{% endraw %}{{ Lang.lang }}{% raw %}/Opentest?{{open_test_uuid}}')" value='{% endraw %}{{ Lang.moreInfo }}{% raw %}'/>
                    </h2>

                    <h3>{% endraw %}{{ Lang.measurement }}{% raw %}</h3>

                    {{#each measurement}}
                        <div class="row">
                            <div class="rowlabel">{{ title }}</div>
                            <a href='https://www.rtr.at/{% endraw %}{{ Lang.lang }}{% raw %}/rtr/netztestfaq_testergebnis#c25826'
                               target='_blank'>
                                <div class='rowclassification classification{{ classification }}'>{{classification}}</div>
                            </a>

                            <div class="rowitem">{{ value }}</div>
                        </div>
                    {{/each}}
                    <h3>{% endraw %}{{ Lang.net }}{% raw %}</h3>
                    {{#each net}}
                        <div class="row">
                            <div class="rowlabel">{{ title }}</div>
                            <div class="rowitem">{{ value }}</div>
                        </div>
                    {{/each}}
                    <hr/>
                {{/each}}
                {% endraw %}
            </div>
            </div>
        </div>
    </div>

<form id="address_search">
	<fieldset>
    <div>
        <div class="form_line">
            <p class="address_input">
                <input type="text" id="address_search_input" name="address_search_input" placeholder="{{ Lang.map_content.search_address }}" />
                <input type="submit" class="submit" value="{{ Lang.search }}" />

            </p>
            <p class="selection" >
                <label for="address_selection">{{ Lang.address_not_distinct}}: </label>
                <select id="address_selection" name="address_selection">
                    <option>{{ Lang.please_select }}</option>
                </select>
            </p>
        </div>
    </div>
    </fieldset>
</form>
<div class="clear"></div>

<h3>{{ Lang.map_key }}</h3>
<div id='map_key_heatmap'>
    <table class="map_key_color dont-stack">
        <tbody>
        <tr style="opacity: 1;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.9;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.8;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.7;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.6;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.5;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.4;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.3;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.2;" class="legend_tr">
        </tr>
        <tr style="opacity: 0.1;" class="legend_tr">
        </tr>
        <tr class="caption">
        </tr>
        </tbody>
    </table>
    <table class="map_key_caption dont-stack">
        <tbody>
        <tr id="heatmap_captions">
            <td class="caption" id="heatmap_caption_low"></td>
            <td class="spacer"></td>
            <td class="caption" id="heatmap_caption_high"></td>
            <td class="units" id="heatmap_caption_unit"></td>
        </tr>
        </tbody>
    </table>

    <div id='map_key_points'>

        <span class="green" ></span>
        <span id="classification_high"></span>
        <span class="yellow"></span>
        <span id="classification_low"></span>
        <span class="red"></span>
    </div>

    <div class="clear"></div>
    <div id="copyright">{{ Lang.sources }}:
        RTR,
        <a href="http://www.basemap.at">basemap.at</a>,
        ArcData, Statistik Austria, BEV 2012</div>
    <!-- <div id="copyright">License (currently not used): (c) BEV 2012.T2012/94555</div> -->


</div>
<div id="greatmap"></div>
</div> <!-- nettestmap -->
{% endblock %}